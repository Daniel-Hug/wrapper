<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Make positioned elements wrap with JS</title>
	<style>
		.wrapper {
			position: relative;
		}

		.wrapper * {
			width: 300px;
			height: 32px;
			position: absolute;
		}
	</style>
</head>
<body>
	<h1>Global variable names <a class="github-button" href="https://github.com/Daniel-Hug/wrapper" data-icon="octicon-star" data-style="mega" data-count-href="/Daniel-Hug/wrapper/stargazers" data-count-api="/repos/Daniel-Hug/wrapper#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star Daniel-Hug/wrapper on GitHub">Star</a></h1>
	<div class="wrapper"></div>

	<script src="wrapper.js"></script>
	<script>
	// Generate random integer within range:
	// var die = getRandomInt(1,6);
	function getRandomInt(min, max) {
		return Math.floor(Math.random() * (max - min + 1)) + min;
	}

	function sumArray(array) {
		var sum = 0;
		for (var i = 0, l = array.length; i < l; i++) sum += array[i];
		return sum;
	}

	function randomColor() {
		var rgb = [1,1,1].map(getRandomInt.bind(null, 0, 255));
		return {
			background: 'rgb(' + rgb.join() + ')',
			foreground: sumArray(rgb) > (255 * 3) / 2 ? 'black' : 'white'
		}
	}

	var parent = document.querySelector('.wrapper');

	var globals = Object.keys(window);
	var widths = globals.map(function() {
		return getRandomInt(300, 800);
	});
	var heights = globals.map(function() {
		return getRandomInt(32, 1200);
	}).sort(function(a, b) {
		return b - a;
	});

	// create an element for each global variable name
	var cells = globals.map(function(key, i) {
		var div = document.createElement('div');
		div.textContent = key;
		var color = randomColor();
		div.style.width = widths[i] + 'px';
		div.style.height = heights[i] + 'px';
		div.style.backgroundColor = color.background;
		div.style.color = color.foreground;
		return div;
	});

	// setup layout
	var wrapper = new Wrapper({
		parent: parent,
		cells: cells,
		cellWidth: widths,
		cellHeight: heights
	});

	// append cells to parent
	appendMultiple(parent, cells)

	function appendMultiple(parent, elements) {
		var docFrag = document.createDocumentFragment();
		for (var i = 0; i < elements.length; i++) {
			docFrag.appendChild(elements[i]);
		}
		parent.appendChild(docFrag);
	}
	</script>
	<script async defer src="https://buttons.github.io/buttons.js"></script>
</body>
</html>